<!-- Add Availabilities modal -->
<ng-template #showAvailabilities>
  <div class="modal-header">
    <h2 class="modal-title">Your schedule on {{date.format('dddd, D MMMM, YYYY')}} </h2>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="container modal-body">
    <div *ngFor="let daily_meeting of daily_meetings">
      <p *ngIf="daily_meeting.mentee">Meeting with {{daily_meeting.mentee.firstName}}
        {{daily_meeting.mentee.lastName}} at {{daily_meeting.datetime | date: "HH:mm"}}.</p>
      <p *ngIf="!daily_meeting.mentee">{{daily_meeting.datetime | date: "HH:mm"}} is still available.</p>
    </div>
    <!-- arrange this to be in bottom right with absolute -->
    <div class="modal-footer">
      <form>
        <h2>Adding Availabilities</h2>
        <input type="time" name="newTime" [(ngModel)]="newTime">
        <button class="btn btn-primary" (click)="newMeeting()">Add</button>
      </form>
    </div>
  </div>
</ng-template>

<!-- Availability page -->
<div class="container">
  <div class="d-flex justify-content-between align-items-center">
    <h1>Your Schedule</h1>
    <button class="btn btn-outline-secondary" [routerLink]="['/user']">Back</button>
  </div>
  <hr />
  <div class="d-flex justify-content-around align-items-center">
    <button class="btn btn-lg btn-outline-success rounded-circle" (click)="prevMonth()"><i class="fa fa-arrow-left" aria-hidden="true"></i></button>
    <div class="w-75 card m-auto bg-white rounded-lg shadow">
      <div class="card-header bg-white">
        <h4 class="text-center text-success p-3">{{ currentDate.format('MMMM YYYY') }}</h4>
      </div>
      <div class="card-body">
        <table class="table w-100">
          <thead>
            <tr>
              <ng-container *ngFor="let name of dayNames">
                <th class="text-center text-success border-0">{{ name }}</th>
              </ng-container>
            </tr>
          </thead>
          <tbody>
            <ng-container *ngFor="let week of weeks">
              <tr>
                <ng-container *ngFor="let day of week">
                  <td class="date-container text-center bg-light border-0" [ngClass]="{ 'today': day.today, 'available': day.available, 'past': day.isPast, 'not-past': !day.isPast }" *ngIf="!isSelectedMonth(day.mDate)" (click)="open(day.mDate)">
                    <div class="date-text m-auto">{{ day.mDate.date() }}</div>
                  </td>
                  <td class="clickable date-container text-center border-0" [ngClass]="{ 'today': day.today, 'available': day.available, 'past': day.isPast, 'not-past': !day.isPast  }" *ngIf="isSelectedMonth(day.mDate)" (click)="open(day.mDate)">
                    <div class="date-text m-auto">{{ day.mDate.date() }}</div>
                  </td>
                </ng-container>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </div>
    </div>
    <button class="btn btn-lg btn-outline-success rounded-circle" (click)="nextMonth()"><i class="fa fa-arrow-right" aria-hidden="true"></i></button>
  </div>
</div>